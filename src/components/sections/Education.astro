---
import { Icon } from "astro-icon/components";
import Section from "../Section.astro";
import { education } from "@cv";
import { certificates } from "@cv";
---

<Section className={Astro.props.className} title="Education">
	<ul class="space-y-4 py-3 print:space-y-0">
		{
			education.map(
				({ institution, startDate, endDate, area, url, iconName }) => {
					const start = new Date(startDate);
					const startYear = start.getFullYear();
					const startMonth = start.toLocaleString("en-US", { month: "short" });
					const end = new Date(endDate);
					const endYear = endDate != null ? end.getFullYear() : "Present";
					const endMonth = end.toLocaleString("en-US", { month: "short" });
					const years = `${startYear} ${startMonth} - ${endYear} ${endMonth}`;

					return (
						<div class="flex items-baseline">
							<Icon
								name={iconName || "mdi:university"}
								class="mr-2 hidden h-6 w-6 self-start md:inline-block print:hidden"
							/>

							<div class="relative w-full items-baseline justify-between gap-2">
								<h3 class="mr-6 items-baseline gap-x-2 gap-y-0.5 font-medium">
									<a
										target="_blank"
										class="group flex items-center gap-[6px] decoration-dotted underline-offset-[5px] hover:text-skin-hue hover:underline"
										href={url}
									>
										{institution}
									</a>
								</h3>
								<div class="text-sm text-skin-muted">{area}</div>
								<time class="right-0 top-0 text-xs text-skin-muted md:absolute md:block">
									{years}
								</time>
							</div>
						</div>
					);
				}
			)
		}
	</ul>
</Section>

<Section className={Astro.props.className} title="Certificates">
	{
		certificates.length > 0 && (
			<>
				<ul class="space-y-4 py-3 print:space-y-0">
					{certificates.map(({ name, date, issuer, url, url_verify, iconName }) => {
						const d = new Date(date);
						const year = d.getFullYear();
						const month = d.toLocaleString("en-US", { month: "short" });
						const certificateYear = `${month} ${year}`;
						return (
							<div class="flex items-baseline">
								<Icon
									name={iconName || "mdi:certificate-outline"}
									class="mr-2 hidden h-6 w-6 self-start md:inline-block print:hidden"
								/>
								<div class="relative w-full items-baseline justify-between gap-2">
									<h3 class="mr-6 items-baseline gap-x-2 gap-y-0.5 font-medium">
										<a
											class="group flex items-center gap-[6px] text-skin-base decoration-dotted underline-offset-[5px] hover:text-skin-hue hover:underline"
											href={url}
											target="_blank"
										>
											{name}
										</a>
									</h3>
									<div class="text-sm text-skin-muted">{issuer}</div>
									<time class="right-0 top-0 text-xs text-skin-muted md:absolute md:block">
										<a
											class="group flex items-center gap-[6px] text-skin-base decoration-dotted underline-offset-[5px] hover:text-skin-hue hover:underline"
											href={url_verify}
											target="_blank"
										>
											{certificateYear}
										</a>
									</time>
								</div>
							</div>
						);
					})}
				</ul>
			</>
		)
	}
</Section>
